package org.dejava.component.util.test.test;

import junit.framework.TestCase;

import org.dejava.component.util.test.runner.MultiDataJUnitRunner;
import org.dejava.component.util.test.test.auxiliary.FakeTest;
import org.junit.Test;
import org.junit.runner.notification.RunListener;
import org.junit.runner.notification.RunNotifier;
import org.junit.runners.model.InitializationError;

/**
 * Test cases for the MultiDataJUnitRunner.
 */
public class MultiDataJUnitRunnerTest extends TestCase {

	/**
	 * Returns an instance of the {@link MultiDataJUnitRunner} for the
	 * {@link FakeTest} that will be used to test the TestRunner.
	 * 
	 * @return An instance of the {@link MultiDataJUnitRunner} for the
	 *         {@link FakeTest} that will be used to test the TestRunner.
	 * @throws InitializationError
	 *             If the test runner cannot me initialized for the
	 *             {@link FakeTest}.
	 */
	private MultiDataJUnitRunner getFakeTestRunner() throws InitializationError {
		// Returns a new instance of the runner for the FakeTest.
		return new MultiDataJUnitRunner(FakeTest.class);
	}

	@Test
	public void testTestNormalFailure() throws InitializationError {
		// Creates a new notifier.
		RunNotifier runNotifier = new RunNotifier();
		// Creates a listener for the FakeTest.
		RunListener runListener = new RunListener();
		
		// Adds the listener to the notifier.
		runNotifier.addListener(runListener);
		// Tries to run the tests.
		getFakeTestRunner().run(runNotifier);
	}
}
